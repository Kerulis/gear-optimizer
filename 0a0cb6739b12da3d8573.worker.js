!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/gear-optimizer/",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function i(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t);var f=function e(t,n,r,o,i){c(this,e),this.name=t,this.slot=n,this.zone=r,this.level=o,this.statnames=[],this.base={},this.disable=!1;for(var a=0;a<i.length;a++)this.statnames.push(i[a][0]),this[i[a][0]]=i[a][1],this.base[i[a][0]]=i[a][1]/2};var l=function(e){function t(e){var n;return c(this,t),(n=i(this,void 0===e?a(t).call(this,"Empty Slot",e,void 0,0,[]):a(t).call(this,"Empty "+e[0]+" Slot",e,void 0,0,[]))).empty=!0,i(n)}return u(t,f),t}(),E=function(e){function t(){var e;return c(this,t),(e=i(this,a(t).call(this,"total",void 0,void 0,100,[]))).items=[],e.counts={},Object.getOwnPropertyNames(m).map(function(t){e.counts[m[t][0]]=0}),Object.getOwnPropertyNames(S).map(function(t){e[S[t]]=100,e.statnames.push(S[t])}),e[S.POWER]=0,e[S.TOUGHNESS]=0,e[S.RESPAWN]=0,e}return u(t,f),t}(),h=function e(t){c(this,e),this.names=[];for(var n=0;n<t.length;n++)this.names.push(t[n][0]),this[t[n][0]]=t[n][1]},p=function(e){for(var t=Object.getOwnPropertyNames(m).map(function(e){return[m[e][0]+0,new l(m[e])]}).filter(function(e){return e[0]!==m.ACCESSORY[0]+0}),n=m.ACCESSORY,r=0;r<e;r++)t.push([n[0]+r,new l(n)]);return t},m={WEAPON:["Weapon",0],HEAD:["Head",1],CHEST:["Armor",2],PANTS:["Pants",3],BOOTS:["Boots",4],ACCESSORY:["Accessory",5]},S={ADVANCE_TRAINING:"Advance Training",AP:"AP",AUGMENT_SPEED:"Augment Speed",BEARD_SPEED:"Beard Speed",COOKING:"Cooking",DAYCARE_SPEED:"Daycare Speed",DROP_CHANCE:"Drop Chance",ENERGY_BARS:"Energy Bars",ENERGY_CAP:"Energy Cap",ENERGY_POWER:"Energy Power",ENERGY_SPEED:"Energy Speed",EXPERIENCE:"Experience",GOLD_DROP:"Gold Drops",HACK_SPEED:"Hack Speed",MAGIC_BARS:"Magic Bars",MAGIC_CAP:"Magic Cap",MAGIC_POWER:"Magic Power",MAGIC_SPEED:"Magic Speed",MOVE_COOLDOWN:"Move Cooldown",NGU_SPEED:"NGU Speed",POWER:"Power",QUEST_DROP:"Quest Drops",RES3_BARS:"Res3 Bars",RES3_CAP:"Res3 Cap",RES3_POWER:"Res3 Power",RESPAWN:"Respawn",SEED_DROP:"Seed Gain",TOUGHNESS:"Toughness",WANDOOS_SPEED:"Wandoos Speed",WISH_SPEED:"Wish Speed",YGGDRASIL_YIELD:"Yggdrasil Yield"},P={NONE:["None",[]],RESPAWN:["Respawn",[S.RESPAWN]],POWER:["Power",[S.POWER]],TOUGHNESS:["Toughness",[S.TOUGHNESS]],DAYCARE_SPEED:["Daycare",[S.DAYCARE_SPEED]],ENGU:["Energy NGU",[S.ENERGY_CAP,S.ENERGY_POWER,S.NGU_SPEED]],MNGU:["Magic NGU",[S.MAGIC_CAP,S.MAGIC_POWER,S.NGU_SPEED]],HACK:["Hacks",[S.RES3_CAP,S.RES3_POWER,S.HACK_SPEED]],NGUS:["NGUs",[S.ENERGY_CAP,S.ENERGY_POWER,S.NGU_SPEED,S.MAGIC_CAP,S.MAGIC_POWER,S.NGU_SPEED]],NGUSHACK:["NGUs and Hacks",[S.ENERGY_CAP,S.ENERGY_POWER,S.NGU_SPEED,S.MAGIC_CAP,S.MAGIC_POWER,S.NGU_SPEED,S.RES3_CAP,S.RES3_POWER,S.HACK_SPEED]],GOLD_DROP:["Gold Drops",[S.GOLD_DROP]],DROP_CHANCE:["Drop chance",[S.DROP_CHANCE]],QUEST_DROP:["Quest Drop",[S.QUEST_DROP]],ENERGY_POWER:["Energy Power",[S.ENERGY_POWER]],MAGIC_POWER:["Magic Power",[S.MAGIC_POWER]],RES3_POWER:["R3 Power",[S.RES3_POWER]],TIMEMACHINE:["Time Machine",[S.ENERGY_CAP,S.ENERGY_POWER,S.MAGIC_CAP,S.MAGIC_POWER]],WANDOOS:["Wandoos",[S.ENERGY_CAP,S.WANDOOS_SPEED,S.MAGIC_CAP,S.WANDOOS_SPEED]]},O={MISC:["Miscellaneous",-3],FOREST_PENDANT:["Forest Pendant",-2],LOOTY:["Looty",-1],ITOPOD:["ITOPOD",0],SAFE:["Safe Zone",1],TRAINING:["Tutorial Zone",2],SEWERS:["Sewers",3],FOREST:["Forest",4],CAVE:["Cave of Many Things",5],SKY:["The Sky",6],HSB:["High Security Base",7],GRB:["Gordon Ramsay Bolton",8],CLOCK:["Clock Dimension",9],GCT:["Grand Corrupted Tree",10],TWO_D:["The 2D Universe",11],SPOOPY:["Ancient Battlefield",12],JAKE:["Jake from Accounting",13],GAUDY:["Ary Strange Place",14],MEGA:["Mega Lands",15],UUG_RINGS:["UUG, The Unmentionable",16],BEARDVERSE:["The Beardverse",17],WANDERER:["Walderp",18],WANDERER2:["Walderp",18],BADLY_DRAWN:["Badly Drawn World",19],STEALTH:["Boring-Ass Earth",20],SLIMY:["The Beast",21,1],SLIMY2:["The Beast",21,2],SLIMY3:["The Beast",21,3],SLIMY4:["The Beast",21,4],CHOCO:["Chocolate World",22],EDGY:["The Evilverse",23],PINK:["Pretty Pink Princess Land",24],NERD:["Greasy Nerd",25,1],NERD2:["Greasy Nerd",25,2],NERD3:["Greasy Nerd",25,3],NERD4:["Greasy Nerd",25,4],META:["Meta Land",26],PARTY:["Interdimensional Party",27],MOBSTER:["The Godmother",28,1],MOBSTER2:["The Godmother",28,2],MOBSTER3:["The Godmother",28,3],MOBSTER4:["The Godmother",28,4],TYPO:["Typo Zonw",29],FAD:["The Fad-lands",30],JRPG:["JRPGVille",31],EXILE:["The Exile",32,1],EXILE2:["The Exile",32,2],EXILE3:["The Exile",32,3],EXILE4:["The Exile",32,4]};function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(e){var t=e[0].score;return e.map(function(e){t=e.score>t?e.score:t}),e.filter(function(e){return e.score===t})}function y(e,t,n,r,o,i,a,s){if(0===n.length)return i;var u=function(e){var t=21;return Object.getOwnPropertyNames(O).map(function(n){3===O[n].length&&O[n][1]<=e&&(t=t[1]>O[n][1]?t:O[n])}),t}(a),c=D(i);c.map(function(e){e.score=N(e,n),e.item_count=e.items.length}),c=A(c);for(var f={},l=function(l){var h=i[l],p=r-h.counts.Accessory;p=o<p?o:p;var S=Object.getOwnPropertyNames(m).filter(function(e){return"Accessory"!==m[e][0]&&!(h.counts[m[e][0]]>0)}).map(function(n){return G(e,t,m[n],h,a,u,s)}),P=[S.map(function(e){return e.length}).reduce(function(e,t){return e*t},1)],O=S.map(function(e){return b(e,n)});P.push(O.map(function(e){return e.length}).reduce(function(e,t){return e*t},1));var g=_(O,h);if(g=b(g,n),P.push(g.length),void 0===f[p]){var y=G(e,t,m.ACCESSORY,h,a,u,s);P.push(y.length),y=b(y,n,p),P.push(y.length);for(var v=new E,T=0;T<y.length;T++)R(v,y[T]);y.sort(function(e,t){var r=N(d(D(v),e),n);return N(d(D(v),t),n)-r}),console.log("Processing "+P[4]+" out of "+P[3]+" accessories with "+p+" slots."),f[p]=function(e,t,n,r,o){var i=e.length;n.score=N(n,o);for(var a=new Array(i+1),s=0;s<i+1;s++)a[s]=new Array(t+1);for(var u=0;u<=i;u++){for(var c=Date.now(),f=0;f<=t;f++)if(0!==u&&0!==f){var l=D(a[u-1][f]),E=D(a[u-1][f-1]);a[u][f]=C(l,E,e[u-1],r,o)}else a[u][f]=[n];0!==u&&(a[u-1]=void 0,console.log(u+"/"+i+" "+Math.floor((Date.now()-c)/10)/100+" "+a[u].reduce(function(e,t){return e+t.length},0)+" "+e[u-1].name))}return a[i][t]}(y,p,h,R,n)}for(var w in console.log("Processing "+P[2]+" out of "+P[1]+" out of "+P[0]+" gear layouts."),g)for(var M in console.log(P[4]),f[p]){for(var W=D(g[w]),I=f[p][M],Y=h.items.length;Y<I.items.length;Y++)R(W,I.items[Y]);W.score=N(W,n),W.item_count=g[w].items.length,c.push(W),c=A(c)}},h=0;h<i.length;h++)l(h);for(var p in c=function(e){if(1===e.length)return e;for(var t=[e[0]],n=1;n<e.length;n++){var r=!1,o=e[n].items.length,i=function(i){if(t[i].items.length!==o)return"continue";var a={};return e[n].items.map(function(e){a[e.name]=!0}),t[i].items.map(function(e){a[e.name]=!0}),Object.getOwnPropertyNames(a).length!==o?"continue":(r=!0,"break")};e:for(var a=0;a<t.length;a++)switch(i(a)){case"continue":continue;case"break":break e}r||t.push(e[n])}return console.log("Keeping "+t.length+" out of "+e.length+" candidates."),t}(c)){for(var S=c[p].items.length,P=[],g=c[p].item_count;g<S;g++){var y=c[p].items[g],v=N(d(D(c[p]),y),n);P.push([v,y])}for(var T=c[p].item_count;T<S;T++)c[p].items.pop();for(var w in P=P.sort(function(e,t){return e[0]-t[0]}))c[p].items.push(P[w][1])}return c}function R(e,t){if(t.empty)return e;for(var n=0;n<t.statnames.length;n++){var r=t.statnames[n];e[r]+=t[r]}return e.items.push(t),e.counts[t.slot[0]]+=1,e}function d(e,t){if(t.empty)return e;if(void 0===(t=e.items.filter(function(e){return e.name===t.name})[0]))return e;for(var n=0;n<t.statnames.length;n++){var r=t.statnames[n];e[r]-=t[r]}return e.items.filter(function(e){return e.name!==t.name}),e.counts[t.slot[0]]-=1,e}var v=function(e,t){var n;return(n=[]).concat.apply(n,g(e.map(function(e){return t.map(function(t){return[].concat(e,t)})})))},_=function(e,t){return 0===e.length?(t.item_count=t.items.length,[t]):function e(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return n?e.apply(void 0,[v(t,n)].concat(o)):t}.apply(void 0,g(e)).map(function(e){for(var n=D(t),r=0;r<e.length;r++)R(n,e[r]);return n.item_count=n.items.length,n})};function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1;for(var o in t){var i=t[o];void 0!==e[i]&&(r*=(n?1:0)+e[i]/100)}return r}function G(e,t,n,r,o,i,a){var s=r.items.filter(function(e){return e.slot[0]===n[0]}).map(function(e){return e.name});return e.filter(function(e){return!t[e].empty&&(!(t[e].zone[1]>o)&&(!(t[e].zone[1]===i[1]&&t[e].zone[2]>a)&&t[e].slot[0]===n[0]))}).map(function(e){return t[e]}).filter(function(e){return!e.disable&&!s.includes(e.name)})}function D(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=D(e[n]);return t}if(e instanceof Object){for(var o in t={},e)e.hasOwnProperty(o)&&(t[o]=D(e[o]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}function C(e,t,n,r,o){for(var i in t){var a=r(D(t[i]),n);a.score=N(a,o),t[i]=a}e=w(t=b(t=t.sort(function(e,t){return t.score-e.score}),o),e,o),t=w(e,t,o);var s=e.concat(t);return s=s.sort(function(e,t){return t.score-e.score})}function T(e,t,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=new Array(n.length).fill(0),i=new Array(n.length).fill(0),a=0;a<n.length;a++){var s=n[a],u=e.statnames.indexOf(s);if(u>=0&&(o[a]=e[s]),(u=t.statnames.indexOf(s))>=0&&(i[a]=t[s]),i[a]>o[a])return!1;i[a]<o[a]&&(r=!1)}return!r}function b(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new Array(e.length).fill(!1),o=void 0===e[0].slot?new E:new l(e[0].slot),i=e.length-1;i>-1;i--)if(T(o,e[i],t,!o.empty)&&(r[i]=n),r[i]!==n)for(var a=e.length-1;a>-1;a--)r[a]!==n&&(r[a]+=T(e[i],e[a],t));var s=r.map(function(t,r){return t<n&&e[r]}).filter(function(e){return!1!==e});return 0===s.length&&(s=[o]),s}function w(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=new Array(t.length).fill(!1),i=void 0===e[0].slot?new E:new l(e[0].slot),a=e.length-1;a>-1;a--)for(var s=t.length-1;s>-1;s--)o[s]!==r&&(o[s]+=T(e[a],t[s],n));var u=o.map(function(e,n){return e<r&&t[n]}).filter(function(e){return!1!==e});return 0===u.length&&(u=[i]),u}self.addEventListener("message",function(e){let t=Date.now(),n=e.data.state,r=[new E];for(let a=0;a<n.factors.length;a++){let e=n.factors[a],t=P[e][1],o=n.maxslots[a];r=y(n.items.names,n.items,t,n.accslots,o,r,n.zone,n.titanversion)}r=r[Math.floor(Math.random()*r.length)];let o=new h(p(n.accslots)),i=Object.getOwnPropertyNames(m).map(e=>0);for(let a=0;a<r.items.length;a++){const e=r.items[a];o[e.slot[0]+i[e.slot[1]]]=e,i[e.slot[1]]++}this.postMessage({equip:o}),this.close(),console.log(Math.floor((Date.now()-t)/10)/100+" seconds")})}]);
//# sourceMappingURL=0a0cb6739b12da3d8573.worker.js.map