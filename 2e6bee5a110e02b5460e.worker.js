!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/gear-optimizer/",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return(o="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}function i(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.r(e);var f=function t(e,n,r,o,i){c(this,t),this.name=e,this.slot=n,this.zone=r,this.level=o,this.statnames=[],this.base={},this.disable=!1;for(var u=0;u<i.length;u++)this.statnames.push(i[u][0]),this[i[u][0]]=i[u][1],this.base[i[u][0]]=i[u][1]/2};var l=function(t){function e(t){var n;return c(this,e),(n=i(this,void 0===t?u(e).call(this,"Empty Slot",t,void 0,0,[]):u(e).call(this,"Empty "+t[0]+" Slot",t,void 0,0,[]))).empty=!0,i(n)}return s(e,f),e}(),E=function(t){function e(){var t;return c(this,e),(t=i(this,u(e).call(this,"total",void 0,void 0,100,[]))).items=[],t.counts={},Object.getOwnPropertyNames(h).map(function(e){t.counts[h[e][0]]=0}),Object.getOwnPropertyNames(y).map(function(e){t[y[e]]=100,t.statnames.push(y[e])}),t[y.POWER]=0,t[y.TOUGHNESS]=0,t[y.RESPAWN]=0,t}return s(e,f),e}(),p=function t(e){c(this,t),this.names=[];for(var n=0;n<e.length;n++)this.names.push(e[n][0]),this[e[n][0]]=e[n][1]},m=function(t){for(var e=Object.getOwnPropertyNames(h).map(function(t){return[h[t][0]+0,new l(h[t])]}).filter(function(t){return t[0]!==h.ACCESSORY[0]+0}),n=h.ACCESSORY,r=0;r<t;r++)e.push([n[0]+r,new l(n)]);return e},h={WEAPON:["Weapon",0],HEAD:["Head",1],CHEST:["Armor",2],PANTS:["Pants",3],BOOTS:["Boots",4],ACCESSORY:["Accessory",5]},y={ADVANCE_TRAINING:"Advance Training",AP:"AP",AUGMENT_SPEED:"Augment Speed",BEARD_SPEED:"Beard Speed",COOKING:"Cooking",DAYCARE_SPEED:"Daycare Speed",DROP_CHANCE:"Drop Chance",ENERGY_BARS:"Energy Bars",ENERGY_CAP:"Energy Cap",ENERGY_POWER:"Energy Power",ENERGY_SPEED:"Energy Speed",EXPERIENCE:"Experience",GOLD_DROP:"Gold Drops",HACK_SPEED:"Hack Speed",MAGIC_BARS:"Magic Bars",MAGIC_CAP:"Magic Cap",MAGIC_POWER:"Magic Power",MAGIC_SPEED:"Magic Speed",MOVE_COOLDOWN:"Move Cooldown",NGU_SPEED:"NGU Speed",POWER:"Power",QUEST_DROP:"Quest Drops",RES3_BARS:"Res3 Bars",RES3_CAP:"Res3 Cap",RES3_POWER:"Res3 Power",RESPAWN:"Respawn",SEED_DROP:"Seed Gain",TOUGHNESS:"Toughness",WANDOOS_SPEED:"Wandoos Speed",WISH_SPEED:"Wish Speed",YGGDRASIL_YIELD:"Yggdrasil Yield"},S={NONE:["None",[]],RESPAWN:["Respawn",[y.RESPAWN]],DAYCARE_SPEED:["Daycare",[y.DAYCARE_SPEED]],ENGU:["Energy NGU",[y.ENERGY_CAP,y.ENERGY_POWER,y.NGU_SPEED]],MNGU:["Magic NGU",[y.MAGIC_CAP,y.MAGIC_POWER,y.NGU_SPEED]],HACK:["Hacks",[y.RES3_CAP,y.RES3_POWER,y.HACK_SPEED]],NGUS:["NGUs",[y.ENERGY_CAP,y.ENERGY_POWER,y.NGU_SPEED,y.MAGIC_CAP,y.MAGIC_POWER,y.NGU_SPEED]],NGUSHACK:["NGUs and Hacks",[y.ENERGY_CAP,y.ENERGY_POWER,y.NGU_SPEED,y.MAGIC_CAP,y.MAGIC_POWER,y.NGU_SPEED,y.RES3_CAP,y.RES3_POWER,y.HACK_SPEED]],DROP_CHANCE:["Drop chance",[y.DROP_CHANCE]],WANDOOS:["Wandoos",[y.ENERGY_CAP,y.WANDOOS_SPEED,y.MAGIC_CAP,y.WANDOOS_SPEED]]};function P(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(t,e,n,r,o,i,u){var a=b(i);a.map(function(t){t.score=d(t,n),t.item_count=t.items.length}),a.sort(function(t,e){return e.score-t.score});for(var s=!1,c=function(c){var f=i[c],l=r-f.counts.Accessory;l=o<l?o:l;var E=Object.getOwnPropertyNames(h).filter(function(t){return"Accessory"!==h[t][0]&&!(f.counts[h[t][0]]>0)}).map(function(n){return R(t,e,h[n],f,u)}),p=[E.map(function(t){return t.length}).reduce(function(t,e){return t*e},1)],m=E.map(function(t){return G(t,n)});p.push(m.map(function(t){return t.length}).reduce(function(t,e){return t*e},1));var y=_(m,f);y=G(y,n),p.push(y.length);var S=R(t,e,h.ACCESSORY,f,u);for(var A in p.push(S.length),S=G(S,n,l),p.push(S.length),S.sort(function(t,e){return d(e,n,!0)-d(t,n,!0)}),console.log("Processing "+p[2]+" out of "+p[1]+" out of "+p[0]+" gear layouts and "+p[4]+" out of "+p[3]+" accessories."),y){console.log(p[4]);var g,O=N(S,l,y[A],function(t){return 1},v,n);if(d(a[0],n)<d(O[0],n)&&(a=O,s=!0),d(a[0],n)===d(O[0],n))(g=a).push.apply(g,P(O)),s=!0}},f=0;f<i.length;f++)c(f);if(!s)return i;for(var l in a){for(var E=a[l].items.length,p=[],m=a[l].item_count;m<E;m++){var y=a[l].items[m],S=d(g(b(a[l]),y),n);p.push([S,y])}for(var A=a[l].item_count;A<E;A++)a[l].items.pop();for(var O in p=p.sort(function(t,e){return t[0]-e[0]}))a[l].items.push(p[O][1])}a.sort(function(t,e){return e.score-t.score});for(var C=a[0].score,D=[(a=a.filter(function(t){return t.score===C}))[0]],w=1;w<a.length;w++){var W=!1,M=a[w].items.length,j=function(t){if(D[t].items.length!==M)return"continue";var e={};return a[w].items.map(function(t){e[t.name]=!0}),D[t].items.map(function(t){e[t.name]=!0}),Object.getOwnPropertyNames(e).length!==M?"continue":(W=!0,"break")};t:for(var Y=0;Y<D.length;Y++){switch(j(Y)){case"continue":continue;case"break":break t}}W||D.push(a[w])}return D}function v(t,e){if(e.empty)return t;for(var n=0;n<e.statnames.length;n++){var r=e.statnames[n];t[r]+=e[r]}return t.items.push(e),t.counts[e.slot[0]]+=1,t}function g(t,e){if(e.empty)return t;if(void 0===(e=t.items.filter(function(t){return t.name===e.name})[0]))return t;for(var n=0;n<e.statnames.length;n++){var r=e.statnames[n];t[r]-=e[r]}return t.items.filter(function(t){return t.name!==e.name}),t.counts[e.slot[0]]-=1,t}var O=function(t,e){var n;return(n=[]).concat.apply(n,P(t.map(function(t){return e.map(function(e){return[].concat(t,e)})})))},_=function(t,e){return 0===t.length?[e]:function t(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return n?t.apply(void 0,[O(e,n)].concat(o)):e}.apply(void 0,P(t)).map(function(t){for(var n=b(e),r=0;r<t.length;r++)v(n,t[r]);return n.item_count=n.items.length,n})};function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1;for(var o in e){var i=e[o];void 0!==t[i]&&(r*=(n?1:0)+t[i]/100)}return r}function R(t,e,n,r,o){var i=r.items.filter(function(t){return t.slot[0]===n[0]}).map(function(t){return t.name});return t.filter(function(t){return!e[t].empty&&(!(e[t].zone[1]>o)&&e[t].slot[0]===n[0])}).map(function(t){return e[t]}).filter(function(t){return!t.disable&&!i.includes(t.name)})}function b(t){var e;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=b(t[n]);return e}if(t instanceof Object){for(var o in e={},t)t.hasOwnProperty(o)&&(e[o]=b(t[o]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")}function C(t,e,n,r,o){for(var i in t=b(t),e){var u=r(b(e[i]),n);u.score=d(u,o),t.push(u)}return G(t=t.sort(function(t,e){return e.score-t.score}),o)}function N(t,e,n,r,o,i){var u=t.length;n.score=d(n,i);for(var a=new Array(u+1),s=0;s<u+1;s++)a[s]=new Array(e+1);for(var c=0;c<=u;c++)for(var f=0;f<=e;f++)if(0!==c&&0!==f)if(r(t[c-1])>f)a[c][f]=a[c-1][f];else{var l=f-r(t[c-1]);a[c][f]=C(b(a[c-1][f]),b(a[c-1][l]),t[c-1],o,i)}else a[c][f]=[n];a[u][e].sort(function(t,e){return e.score-t.score});var E=a[u][e][0].score;return a[u][e].filter(function(t){return t.score===E})}function D(t,e,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=new Array(n.length).fill(0),i=new Array(n.length).fill(0),u=0;u<n.length;u++){var a=n[u],s=t.statnames.indexOf(a);if(s>=0&&(o[u]=t[a]),(s=e.statnames.indexOf(a))>=0&&(i[u]=e[a]),i[u]>o[u])return!1;i[u]<o[u]&&(r=!1)}return!r}function G(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new Array(t.length).fill(!1),o=void 0===t[0].slot?new E:new l(t[0].slot),i=t.length-1;i>-1;i--)if(D(o,t[i],e,!o.empty)&&(r[i]=n),r[i]!==n)for(var u=t.length-1;u>-1;u--)r[u]!==n&&(r[u]+=D(t[i],t[u],e)?1:0);var a=r.map(function(e,r){return e<n&&t[r]}).filter(function(t){return!1!==t});return 0===a.length&&(a=[o]),a}self.addEventListener("message",function(t){let e=t.data.state,n=[new E];for(let i=0;i<e.factors.length;i++){let t=e.factors[i],r=S[t][1],o=e.accslots;"RESPAWN"===t&&(o=e.respawn),"DAYCARE_SPEED"===t&&(o=e.daycare),n=A(e.items.names,e.items,r,e.accslots,o,n,e.zone)}n=n[Math.floor(Math.random()*n.length)];let r=new p(m(e.accslots)),o=Object.getOwnPropertyNames(h).map(t=>0);for(let i in n.items){const t=n.items[i];r[t.slot[0]+o[t.slot[1]]]=t,o[t.slot[1]]++}this.postMessage({equip:r}),this.close()})}]);
//# sourceMappingURL=2e6bee5a110e02b5460e.worker.js.map